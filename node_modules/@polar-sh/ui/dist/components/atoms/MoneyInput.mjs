import{a as F}from"../../chunk-34A766AI.mjs";import"../../chunk-OJVCB4YM.mjs";import"../../chunk-WIPTQCGG.mjs";import{DollarSign as S}from"lucide-react";import{useCallback as c,useEffect as $,useState as x}from"react";import{twMerge as B}from"tailwind-merge";import{jsx as M}from"react/jsx-runtime";var L=n=>{let r=Number.parseFloat(n);return isNaN(r)&&(r=0),Math.round(r*100)},E=n=>n!=null?(n/100).toFixed(2):void 0,R=n=>{let{id:r,name:D,value:o,placeholder:f,preSlot:g,postSlot:k,onChange:s,onBlur:d,onFocus:w,disabled:C,step:u=.1}=n,[b,p]=x(o),[i,h]=x(E(o));$(()=>{o!==b&&(p(o),h(E(o)))},[o,b]);let a=c(e=>{if(console.log("Updating value to:",e),s)if(!e||e.trim()==="")p(null),s(null);else{let t=L(e);p(t),s(t)}h(e)},[s]),V=c(e=>{let t=e.target.value;if(t===""){a("");return}let l=t.replace(/[^0-9,.]/g,""),v=l.replace(/[,.](?!$)/g,"").replace(/,$/,"."),m=l.match(/([.,])([0-9]+)$/);if(m){let N=m[2],P=l.slice(0,-m[0].length).replace(/[,.]/g,""),y=Number.parseFloat(`${P}.${N.slice(0,2)}`);Number.isNaN(y)||(v=y.toFixed(Math.min(2,N.length)))}a(v)},[a]),I=c(e=>{if(i?.endsWith(".")){let t=i.replace(/\.$/,"");a(t)}d&&d(e)},[d,i,a]),T=c(e=>{if(!/[0-9.,]/.test(e.key)&&!["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(e.key)&&!e.ctrlKey&&!e.metaKey&&e.preventDefault(),e.key==="ArrowUp"){e.preventDefault();let t=Number.parseFloat(e.currentTarget.value),l=(Number.isNaN(t)?u:t+u).toFixed(2);a(l)}if(e.key==="ArrowDown"){let t=Number.parseFloat(e.currentTarget.value),l=Math.max(0,Number.isNaN(t)?-u:t-u).toFixed(2);a(l)}(e.key==="."||e.key===",")&&e.currentTarget.value.includes(".")&&e.preventDefault()},[u,a]);return M(F,{type:"text",inputMode:"decimal",id:r,name:D,className:B("dark:placeholder:text-polar-500 block w-full px-4 pl-8 text-base font-normal placeholder:text-gray-400",n.className??""),value:i,onChange:V,onKeyDown:T,placeholder:f?`${f/100}`:void 0,preSlot:g||M(S,{className:"h-4 w-4"}),postSlot:k,onBlur:I,onFocus:w,disabled:C})},z=R;export{z as default};
