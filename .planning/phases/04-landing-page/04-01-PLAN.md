---
phase: 04-landing-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - vite.config.ts
  - src/app.css
  - src/routes/+layout.svelte
  - src/routes/(landing)/+layout.svelte
  - src/routes/(landing)/+page.svelte
  - src/routes/(landing)/+page.ts
  - src/routes/(app)/+layout.svelte
  - src/routes/(app)/dashboard/+layout.svelte
  - src/routes/(app)/dashboard/+page.svelte
  - src/routes/(app)/onboarding/+page.svelte
  - src/routes/(app)/onboarding/+page.server.ts
  - src/routes/(app)/login/+page.svelte
  - src/routes/(app)/signup/+page.svelte
  - src/routes/(app)/auth/callback/+server.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "Tailwind CSS loads via Vite plugin, not CDN script tag"
    - "Landing page at / renders with full Tailwind styling and no dashboard chrome"
    - "Dashboard/login/signup/onboarding pages still work with their existing layout"
    - "Landing page is prerendered as static HTML at build time"
    - "Dev server starts without errors"
  artifacts:
    - path: "vite.config.ts"
      provides: "Tailwind Vite plugin integration"
      contains: "@tailwindcss/vite"
    - path: "src/app.css"
      provides: "Tailwind CSS import"
      contains: "@import"
    - path: "src/routes/+layout.svelte"
      provides: "Minimal root layout (CSS import + render)"
    - path: "src/routes/(landing)/+layout.svelte"
      provides: "Landing page layout (no dashboard chrome)"
    - path: "src/routes/(landing)/+page.svelte"
      provides: "Landing page placeholder"
    - path: "src/routes/(landing)/+page.ts"
      provides: "Prerender config"
      contains: "prerender"
    - path: "src/routes/(app)/+layout.svelte"
      provides: "App layout wrapper (bg-gray-50, existing dashboard chrome)"
  key_links:
    - from: "src/routes/+layout.svelte"
      to: "src/app.css"
      via: "CSS import"
      pattern: "import.*app\\.css"
    - from: "vite.config.ts"
      to: "@tailwindcss/vite"
      via: "Vite plugin"
      pattern: "tailwindcss\\(\\)"
---

<objective>
Migrate Tailwind CSS from CDN to @tailwindcss/vite plugin and restructure routes into (landing) and (app) route groups so the landing page has its own layout separate from the dashboard.

Purpose: This is the prerequisite for all other Phase 4 plans. CDN Tailwind is not production-ready (blocks rendering, not tree-shaken, ~3MB client-side). Route groups allow the landing page to have a full-width layout without the dashboard sidebar/wrapper.

Output: Working Tailwind v4 via Vite plugin, route groups separating landing from app, placeholder landing page at /, all existing pages still functional.
</objective>

<execution_context>
@/home/rachel/.claude/get-shit-done/workflows/execute-plan.md
@/home/rachel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-landing-page/04-CONTEXT.md
@.planning/phases/04-landing-page/04-RESEARCH.md

# Existing files to understand current structure:
@src/routes/+layout.svelte
@src/routes/+page.svelte
@src/routes/login/+page.svelte
@src/routes/onboarding/+page.svelte
@vite.config.ts
@package.json
@src/app.html
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Tailwind CSS v4 and migrate from CDN to @tailwindcss/vite</name>
  <files>
    package.json
    vite.config.ts
    src/app.css
    src/routes/+layout.svelte
  </files>
  <action>
    1. Install Tailwind CSS and the Vite plugin:
       ```bash
       cd /tmp/rachel-cloud && bun add -d tailwindcss @tailwindcss/vite
       ```

    2. Update `vite.config.ts` to add the Tailwind Vite plugin. Import `tailwindcss` from `@tailwindcss/vite` and add `tailwindcss()` to the plugins array BEFORE `sveltekit()`:
       ```typescript
       import { sveltekit } from '@sveltejs/kit/vite';
       import { defineConfig } from 'vite';
       import tailwindcss from '@tailwindcss/vite';

       export default defineConfig({
         plugins: [tailwindcss(), sveltekit()]
       });
       ```

    3. Create `src/app.css` with the Tailwind v4 import:
       ```css
       @import "tailwindcss";
       ```

    4. Update `src/routes/+layout.svelte`:
       - Add `import '../app.css';` in the script block
       - REMOVE the `<svelte:head><script src="https://cdn.tailwindcss.com"></script></svelte:head>` block entirely
       - REMOVE the `<div class="min-h-screen bg-gray-50">` wrapper (this will move to the (app) route group layout)
       - Keep the `$props()` and `{@render children()}` pattern
       - Remove the unused `page` import from `$app/stores`
       - The root layout should be minimal:
         ```svelte
         <script lang="ts">
           import '../app.css';
           let { children } = $props();
         </script>

         {@render children()}
         ```

    5. Verify dev server starts: `cd /tmp/rachel-cloud && bun run dev` (check no errors, Tailwind classes render properly).
  </action>
  <verify>
    - `bun run dev` starts without errors
    - No `cdn.tailwindcss.com` references remain in source code (grep for it)
    - `src/app.css` exists with `@import "tailwindcss"`
    - `vite.config.ts` includes `tailwindcss()` in plugins
    - Existing pages (login, signup, onboarding) still render with Tailwind styles
  </verify>
  <done>
    Tailwind CSS loads via Vite build pipeline. CDN script tag is completely removed. Dev server starts clean. All existing Tailwind classes on login/signup/onboarding pages render correctly.
  </done>
</task>

<task type="auto">
  <name>Task 2: Restructure routes into (landing) and (app) route groups</name>
  <files>
    src/routes/(landing)/+layout.svelte
    src/routes/(landing)/+page.svelte
    src/routes/(landing)/+page.ts
    src/routes/(app)/+layout.svelte
    src/routes/(app)/dashboard/+layout.svelte
    src/routes/(app)/dashboard/+page.svelte
    src/routes/(app)/onboarding/+page.svelte
    src/routes/(app)/onboarding/+page.server.ts
    src/routes/(app)/login/+page.svelte
    src/routes/(app)/signup/+page.svelte
    src/routes/(app)/auth/callback/+server.ts
  </files>
  <action>
    1. Create the `(landing)` route group:
       - Create directory `src/routes/(landing)/`
       - Create `src/routes/(landing)/+layout.svelte` -- minimal layout, no bg-gray-50 wrapper, just renders children. This gives the landing page full control of its own layout:
         ```svelte
         <script lang="ts">
           let { children } = $props();
         </script>

         {@render children()}
         ```
       - Create `src/routes/(landing)/+page.svelte` -- a placeholder landing page that proves the route group works. Include a heading, a brief description, and a link to /signup. Use Tailwind classes:
         ```svelte
         <h1 class="text-4xl font-bold text-center mt-20">Rachel Cloud</h1>
         <p class="text-center text-gray-600 mt-4">Your personal AI assistant on Telegram</p>
         <div class="text-center mt-8">
           <a href="/signup" class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">Sign Up</a>
         </div>
         ```
       - Create `src/routes/(landing)/+page.ts` with `export const prerender = true;`

    2. Create the `(app)` route group:
       - Create directory `src/routes/(app)/`
       - Create `src/routes/(app)/+layout.svelte` that wraps children in the existing `<div class="min-h-screen bg-gray-50">` wrapper (moved from the old root layout):
         ```svelte
         <script lang="ts">
           let { children } = $props();
         </script>

         <div class="min-h-screen bg-gray-50">
           {@render children()}
         </div>
         ```

    3. Move existing routes into `(app)` group:
       - Move `src/routes/dashboard/` -> `src/routes/(app)/dashboard/` (entire directory with all nested files)
       - Move `src/routes/onboarding/` -> `src/routes/(app)/onboarding/` (all files)
       - Move `src/routes/login/` -> `src/routes/(app)/login/` (all files)
       - Move `src/routes/signup/` -> `src/routes/(app)/signup/` (all files)
       - Move `src/routes/auth/` -> `src/routes/(app)/auth/` (all files including callback/+server.ts)

       Use `git mv` for all moves to preserve history.

    4. Remove the old `src/routes/+page.svelte` (the placeholder "Welcome to Rachel Cloud" page). The (landing) group now owns the `/` route.

    5. Keep `src/routes/api/` where it is -- API routes do NOT move into a route group (they have no layout).

    6. Verify: Start dev server, check that:
       - `/` shows the new landing page placeholder
       - `/login` still shows the login form with bg-gray-50 background
       - `/dashboard` still shows the dashboard with its sidebar layout
       - `/onboarding` still renders the onboarding flow
       - API routes still respond (e.g., `/api/auth/sign-in/email`)
  </action>
  <verify>
    - `src/routes/(landing)/+page.svelte` exists and serves at `/`
    - `src/routes/(landing)/+page.ts` has `export const prerender = true`
    - `src/routes/(app)/login/+page.svelte` exists and serves at `/login`
    - `src/routes/(app)/dashboard/` exists with nested layout and pages
    - `src/routes/api/` remains at top level (NOT inside a route group)
    - Old `src/routes/+page.svelte` is removed
    - `bun run dev` starts, all routes serve correctly
  </verify>
  <done>
    Route groups are in place: (landing) group owns `/` with no dashboard chrome, (app) group owns `/login`, `/signup`, `/onboarding`, `/dashboard`, `/auth` with the bg-gray-50 wrapper. API routes remain at top level. All existing pages still work. Landing page is prerendered.
  </done>
</task>

</tasks>

<verification>
1. `bun run dev` starts without errors or warnings
2. `grep -r "cdn.tailwindcss.com" src/` returns no results (CDN fully removed)
3. Visit `/` -- landing page placeholder renders with Tailwind styling
4. Visit `/login` -- login page renders with Tailwind styling and bg-gray-50 background
5. Visit `/dashboard` -- dashboard page renders with sidebar layout
6. `bun run build` completes successfully (checks prerendering works)
7. Build output shows `/` in prerendered pages list
</verification>

<success_criteria>
- Tailwind CSS v4 installed and working via @tailwindcss/vite plugin (no CDN)
- Route groups (landing) and (app) properly separate layouts
- Landing page at / is prerendered as static HTML
- All existing routes (login, signup, onboarding, dashboard, API) still function
- Dev server and build both pass without errors
</success_criteria>

<output>
After completion, create `.planning/phases/04-landing-page/04-01-SUMMARY.md`
</output>
