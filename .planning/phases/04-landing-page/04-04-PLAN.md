---
phase: 04-landing-page
plan: 04
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - src/lib/components/landing/TelegramDemo.svelte
  - src/routes/(landing)/+page.svelte
  - package.json
autonomous: true

must_haves:
  truths:
    - "Telegram chat mockup renders on the landing page showing a realistic conversation"
    - "Chat bubbles are styled with CSS, not screenshots"
    - "Sections animate into view as user scrolls down the page"
    - "Animations are performant and don't cause layout shift"
    - "Page still works without JavaScript (content visible, just no animations)"
  artifacts:
    - path: "src/lib/components/landing/TelegramDemo.svelte"
      provides: "CSS-based Telegram chat mockup component"
      contains: "message"
    - path: "src/routes/(landing)/+page.svelte"
      provides: "Landing page with TelegramDemo and scroll animations"
  key_links:
    - from: "src/routes/(landing)/+page.svelte"
      to: "src/lib/components/landing/TelegramDemo.svelte"
      via: "component import"
      pattern: "import.*TelegramDemo"
    - from: "src/routes/(landing)/+page.svelte"
      to: "svelte-inview"
      via: "scroll trigger action"
      pattern: "inview"
---

<objective>
Create the Telegram chat mockup component and add scroll-triggered animations to landing page sections.

Purpose: The Telegram mockup is the "show, don't tell" element -- visitors see exactly what chatting with Rachel looks like. Scroll animations add polish and engagement. This is the final visual layer.

Output: Realistic Telegram chat mockup rendered in CSS, smooth scroll-reveal animations on all sections.
</objective>

<execution_context>
@/home/rachel/.claude/get-shit-done/workflows/execute-plan.md
@/home/rachel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-landing-page/04-CONTEXT.md
@.planning/phases/04-landing-page/04-RESEARCH.md
@.planning/phases/04-landing-page/04-02-SUMMARY.md

# Reference for existing landing page composition:
@src/routes/(landing)/+page.svelte
@src/lib/components/landing/Hero.svelte
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TelegramDemo component and integrate into landing page</name>
  <files>
    src/lib/components/landing/TelegramDemo.svelte
    src/routes/(landing)/+page.svelte
  </files>
  <action>
    **TelegramDemo.svelte:**
    Create a CSS-based Telegram chat mockup component with these elements:

    1. **Chat window frame:**
       - Rounded container with shadow (`rounded-2xl shadow-xl overflow-hidden border border-gray-200`)
       - Max width ~384px (`max-w-sm`) centered with `mx-auto`
       - White background

    2. **Telegram-style header bar:**
       - Blue background (`bg-[#2AABEE]` for Telegram blue, or `bg-blue-500`)
       - Avatar circle with "R" initial
       - Bot name "Rachel" with "online" status indicator
       - Padding and flex layout

    3. **Message area:**
       - Light gray background (`bg-[#E7EBEE]` for Telegram chat bg, or `bg-gray-100`)
       - Minimum height for visual impact (~300-350px)
       - Padding and vertical spacing between messages

    4. **Chat bubbles:**
       - Define a `Message` interface: `{ text: string; sender: 'user' | 'rachel'; time: string }`
       - User messages: right-aligned, blue/green background (`bg-[#EFFDDE]` for Telegram green or `bg-blue-500 text-white`), rounded with bottom-right corner less rounded
       - Rachel messages: left-aligned, white background with border, rounded with bottom-left corner less rounded
       - Each bubble: text content + timestamp in small gray text
       - Max width 80% of container

    5. **Conversation content:**
       Showcase Rachel's capabilities in 4-6 messages:
       ```
       User: "Hey Rachel, summarize today's top tech news" (10:30 AM)
       Rachel: "Here are today's top 3 stories:\n\n1. OpenAI released..." (10:30 AM)
       User: "Remind me to review PRs at 3pm" (10:31 AM)
       Rachel: "Done! I'll remind you at 2:45 PM so you have time to prepare." (10:31 AM)
       ```
       Keep messages realistic and showcasing different capabilities (info retrieval, task management).

    6. **Section wrapper:**
       - Wrap the mockup in a `<section>` with heading "See Rachel in Action" or similar
       - Add context text above the mockup explaining what the visitor is seeing
       - Responsive: on mobile, the mockup takes full width (minus padding); on desktop, centered

    **Integrate into landing page:**
    - Import `TelegramDemo` in `src/routes/(landing)/+page.svelte`
    - Add it between Features and Pricing sections (position 4 in the section order per RESEARCH.md):
      ```
      Hero -> HowItWorks -> Features -> TelegramDemo -> Pricing -> OpenSource -> FAQ -> Footer
      ```

    Use Svelte 5 syntax. No client-side data fetching. Pure presentational component.
  </action>
  <verify>
    - `src/lib/components/landing/TelegramDemo.svelte` exists
    - Component renders a chat window with header, message area, and bubbles
    - Both user and Rachel messages are styled differently (alignment, color)
    - Timestamps shown on each message
    - Landing page at `/` shows TelegramDemo between Features and Pricing
    - Responsive: mockup looks good at 375px and 1280px widths
    - No screenshots or images used -- all CSS/HTML
  </verify>
  <done>
    Telegram chat mockup renders as a CSS component showing a realistic 4-6 message conversation. User messages are right-aligned, Rachel messages are left-aligned, with Telegram-style header and bubbles. Integrated into landing page between Features and Pricing sections.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add scroll-triggered reveal animations to all landing page sections</name>
  <files>
    src/routes/(landing)/+page.svelte
    package.json
  </files>
  <action>
    1. Install svelte-inview:
       ```bash
       cd /tmp/rachel-cloud && bun add svelte-inview
       ```

    2. Add scroll-reveal animations to the landing page sections in `src/routes/(landing)/+page.svelte`.

       **Approach A (preferred): svelte-inview action**
       Use `svelte-inview` as a Svelte action (`use:inview`) combined with Svelte 5 `$state()` and built-in transitions:
       ```svelte
       <script lang="ts">
         import { inview } from 'svelte-inview';
         import { fly, fade } from 'svelte/transition';

         let heroVisible = $state(false);
         let howItWorksVisible = $state(false);
         // ... one per section
       </script>

       <div use:inview={{ rootMargin: '-100px', unobserveOnEnter: true }}
            oninview_enter={() => (heroVisible = true)}>
         {#if heroVisible}
           <div transition:fly={{ y: 30, duration: 600 }}>
             <Hero />
           </div>
         {/if}
       </div>
       ```

       **Approach B (fallback if svelte-inview compat issues):** Create a custom Svelte action:
       ```typescript
       function inview(node: HTMLElement, callback: () => void) {
         const observer = new IntersectionObserver(
           (entries) => {
             if (entries[0].isIntersecting) {
               callback();
               observer.disconnect();
             }
           },
           { rootMargin: '-100px' }
         );
         observer.observe(node);
         return { destroy: () => observer.disconnect() };
       }
       ```

       Try Approach A first. If `svelte-inview` events don't work correctly with Svelte 5 (the `oninview_enter` syntax may differ), switch to Approach B.

    3. **Animation design:**
       - Hero section: fade in immediately (no scroll trigger needed -- it's above fold), or subtle fly-up
       - HowItWorks, Features, TelegramDemo, Pricing, OpenSource, FAQ: fly up (`fly={{ y: 30, duration: 600 }}`) when scrolling into view
       - Footer: no animation (it's the page end, animation would be jarring)
       - Use `unobserveOnEnter: true` so animations only fire once (not on scroll back up)
       - Keep `rootMargin: '-100px'` so sections animate when they're ~100px into the viewport (not at the very edge)

    4. **Ensure graceful degradation:**
       - If JavaScript is disabled, content should still be visible. The `{#if visible}` blocks mean content is hidden without JS. Consider using CSS `opacity` approach instead if prerendering is a concern.
       - Alternative: Since the page is prerendered, content IS in the HTML. The `{#if}` block will render server-side as `false`, so content won't be in the prerendered HTML. To fix this for SEO, consider using CSS-only transitions:
         ```svelte
         <div class="opacity-0 translate-y-8 transition-all duration-700"
              use:inview={{ unobserveOnEnter: true }}
              oninview_enter={(e) => e.target.classList.add('opacity-100', 'translate-y-0')}>
           <Hero />
         </div>
         ```
         This approach keeps content in the DOM (good for SEO/prerender) and uses CSS transitions instead of Svelte transitions. **Prefer this CSS approach** for the landing page since it's prerendered.

    5. Verify all animations are smooth (no jank), fire only once, and don't cause cumulative layout shift (CLS).
  </action>
  <verify>
    - `svelte-inview` (or custom action) is installed/implemented
    - Scrolling down the landing page triggers section reveal animations
    - Animations fire only once per section (scrolling back up doesn't re-trigger)
    - Hero section is visible immediately (above fold)
    - No layout shift during animations (content doesn't jump around)
    - Content is present in prerendered HTML (check `bun run build` output or view source)
    - `bun run dev` shows smooth animations
    - Page works without JavaScript (content visible, no animations)
  </verify>
  <done>
    All landing page sections (except Hero and Footer) have scroll-triggered reveal animations. Animations are smooth, fire once, and don't cause layout shift. Content is present in prerendered HTML for SEO. Page degrades gracefully without JavaScript.
  </done>
</task>

</tasks>

<verification>
1. `bun run dev` starts without errors
2. Visit `/` -- Telegram chat mockup visible between Features and Pricing
3. Chat mockup shows realistic conversation with user and Rachel messages
4. Scroll down -- sections animate into view with smooth fly-up effect
5. Scroll back up -- animations do not re-trigger
6. View page source -- content is present in HTML (not hidden by JS)
7. Responsive: mockup and animations work on mobile (375px)
8. `bun run build` completes -- landing page prerendered with all content
</verification>

<success_criteria>
- Telegram chat mockup is pure CSS/HTML (no screenshots)
- Chat mockup shows a realistic 4-6 message conversation demonstrating Rachel's capabilities
- Scroll animations fire on all below-fold sections
- Animations are performant (no jank, no CLS)
- Content is in prerendered HTML (SEO-safe)
- Page works without JavaScript (graceful degradation)
</success_criteria>

<output>
After completion, create `.planning/phases/04-landing-page/04-04-SUMMARY.md`
</output>
