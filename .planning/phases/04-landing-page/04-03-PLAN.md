---
phase: 04-landing-page
plan: 03
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/lib/components/seo/JsonLd.svelte
  - src/routes/(landing)/+page.svelte
  - src/routes/sitemap.xml/+server.ts
  - src/routes/robots.txt/+server.ts
  - package.json
autonomous: true

must_haves:
  truths:
    - "Landing page has proper meta title and description in HTML head"
    - "Sharing the URL on social media shows Open Graph preview with title, description, and image"
    - "Twitter card shows summary_large_image format when shared"
    - "Google can parse JSON-LD structured data (SoftwareApplication schema)"
    - "Sitemap.xml is accessible and lists public pages"
    - "robots.txt allows crawling of public pages"
  artifacts:
    - path: "src/lib/components/seo/JsonLd.svelte"
      provides: "Reusable JSON-LD component"
      contains: "application/ld\\+json"
    - path: "src/routes/(landing)/+page.svelte"
      provides: "Landing page with MetaTags and JsonLd"
      contains: "MetaTags"
    - path: "src/routes/sitemap.xml/+server.ts"
      provides: "Dynamic sitemap endpoint"
      contains: "urlset"
    - path: "src/routes/robots.txt/+server.ts"
      provides: "Robots.txt endpoint"
      contains: "Sitemap"
  key_links:
    - from: "src/routes/(landing)/+page.svelte"
      to: "svelte-meta-tags"
      via: "MetaTags component import"
      pattern: "import.*MetaTags.*svelte-meta-tags"
    - from: "src/routes/(landing)/+page.svelte"
      to: "src/lib/components/seo/JsonLd.svelte"
      via: "JsonLd component import"
      pattern: "import.*JsonLd"
    - from: "src/routes/robots.txt/+server.ts"
      to: "src/routes/sitemap.xml/+server.ts"
      via: "Sitemap URL reference"
      pattern: "sitemap\\.xml"
---

<objective>
Add SEO infrastructure: svelte-meta-tags for Open Graph/Twitter Cards, JSON-LD structured data for rich search results, sitemap.xml, and robots.txt.

Purpose: SEO is critical for organic discovery. Proper meta tags ensure social media shares look good (driving click-throughs). JSON-LD helps Google display rich results. Sitemap and robots.txt guide crawlers.

Output: Landing page with complete meta tags, JSON-LD structured data, accessible sitemap.xml and robots.txt.
</objective>

<execution_context>
@/home/rachel/.claude/get-shit-done/workflows/execute-plan.md
@/home/rachel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-landing-page/04-CONTEXT.md
@.planning/phases/04-landing-page/04-RESEARCH.md
@.planning/phases/04-landing-page/04-01-SUMMARY.md

# Reference for the landing page composition:
@src/routes/(landing)/+page.svelte
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install SEO packages, create JsonLd component, and add meta tags to landing page</name>
  <files>
    package.json
    src/lib/components/seo/JsonLd.svelte
    src/routes/(landing)/+page.svelte
  </files>
  <action>
    1. Install SEO packages:
       ```bash
       cd /tmp/rachel-cloud && bun add svelte-meta-tags schema-dts
       ```

    2. Create `src/lib/components/seo/JsonLd.svelte` -- a reusable component that renders JSON-LD in `<svelte:head>`:
       ```svelte
       <script lang="ts">
         import type { Thing, WithContext } from 'schema-dts';

         interface Props {
           schema: WithContext<Thing>;
         }

         let { schema }: Props = $props();
       </script>

       <svelte:head>
         {@html `<script type="application/ld+json">${JSON.stringify(schema)}</script>`}
       </svelte:head>
       ```

    3. Update `src/routes/(landing)/+page.svelte` to add MetaTags and JsonLd. Add to the existing script block (before the section component imports):

       Import `MetaTags` from `svelte-meta-tags` and `JsonLd` from `$lib/components/seo/JsonLd.svelte`.

       Add MetaTags component with:
       - `title`: "Rachel Cloud - Your Personal AI Assistant on Telegram"
       - `description`: "Get your own AI assistant powered by Claude, running 24/7 on Telegram. Managed hosting, zero setup. $20/month."
       - `canonical`: "https://rachelcloud.ai" (use this as the canonical domain -- update if domain changes)
       - `openGraph` with:
         - `type: 'website'`
         - `url`: canonical URL
         - `title`: same as page title
         - `description`: same as page description
         - `images`: array with one image object: `url: 'https://rachelcloud.ai/og-image.png'`, `width: 1200`, `height: 630`, `alt: 'Rachel Cloud - AI Assistant on Telegram'`
         - `siteName: 'Rachel Cloud'`
       - `twitter` with:
         - `cardType: 'summary_large_image'`
         - `title`: same as page title
         - `description`: shorter version for Twitter
         - `image`: same OG image URL

       Add JsonLd component with SoftwareApplication schema:
       ```typescript
       import type { WithContext, SoftwareApplication } from 'schema-dts';

       const jsonLd: WithContext<SoftwareApplication> = {
         '@context': 'https://schema.org',
         '@type': 'SoftwareApplication',
         name: 'Rachel Cloud',
         applicationCategory: 'CommunicationApplication',
         operatingSystem: 'Web',
         description: 'Personal AI assistant powered by Claude, running 24/7 on Telegram. Managed hosting, zero setup.',
         offers: {
           '@type': 'Offer',
           price: '20.00',
           priceCurrency: 'USD'
         },
         url: 'https://rachelcloud.ai'
       };
       ```

       Place `<MetaTags ... />` and `<JsonLd schema={jsonLd} />` BEFORE the `<main>` element in the template.

    NOTE: The OG image (`/og-image.png`) is a placeholder reference. The actual image file needs to be created manually (Figma/Canva) and placed in `static/og-image.png`. For now, reference it in the meta tags so the structure is correct. This is a deferred task -- static PNG creation is a manual/design task.
  </action>
  <verify>
    - `svelte-meta-tags` and `schema-dts` appear in package.json dependencies
    - `src/lib/components/seo/JsonLd.svelte` exists and contains `application/ld+json`
    - `src/routes/(landing)/+page.svelte` imports MetaTags and JsonLd
    - `bun run dev` starts without errors
    - View page source at `/`: `<title>` contains "Rachel Cloud", `<meta property="og:title">` exists, `<script type="application/ld+json">` exists with SoftwareApplication schema
    - No duplicate `<title>` tags in head
  </verify>
  <done>
    Landing page has complete SEO meta tags (title, description, canonical, Open Graph, Twitter Cards) and JSON-LD structured data (SoftwareApplication schema). Social shares will show proper preview cards. Google can parse structured data.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create sitemap.xml and robots.txt endpoints</name>
  <files>
    src/routes/sitemap.xml/+server.ts
    src/routes/robots.txt/+server.ts
  </files>
  <action>
    1. Create `src/routes/sitemap.xml/+server.ts` -- a prerendered server endpoint that generates a sitemap:
       ```typescript
       export const prerender = true;

       export async function GET() {
         const baseUrl = 'https://rachelcloud.ai';
         const pages = [
           { url: '/', priority: '1.0', changefreq: 'weekly' },
           { url: '/signup', priority: '0.8', changefreq: 'monthly' },
           { url: '/login', priority: '0.5', changefreq: 'monthly' }
         ];

         const sitemap = `<?xml version="1.0" encoding="UTF-8"?>
       <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
       ${pages.map(p => `  <url>
           <loc>${baseUrl}${p.url}</loc>
           <priority>${p.priority}</priority>
           <changefreq>${p.changefreq}</changefreq>
         </url>`).join('\n')}
       </urlset>`;

         return new Response(sitemap.trim(), {
           headers: {
             'Content-Type': 'application/xml',
             'Cache-Control': 'max-age=3600'
           }
         });
       }
       ```

       Only include public pages (/, /signup, /login). Do NOT include dashboard, onboarding, or API routes.

    2. Create `src/routes/robots.txt/+server.ts` -- a prerendered server endpoint:
       ```typescript
       export const prerender = true;

       export async function GET() {
         const body = `User-agent: *
       Allow: /
       Disallow: /dashboard
       Disallow: /onboarding
       Disallow: /api

       Sitemap: https://rachelcloud.ai/sitemap.xml`;

         return new Response(body.trim(), {
           headers: {
             'Content-Type': 'text/plain',
             'Cache-Control': 'max-age=3600'
           }
         });
       }
       ```

       Block crawlers from dashboard, onboarding, and API routes. Allow all public pages.

    3. Verify both endpoints are prerenderable: they must not import any server-only modules or use dynamic data.
  </action>
  <verify>
    - `src/routes/sitemap.xml/+server.ts` exists with `prerender = true`
    - `src/routes/robots.txt/+server.ts` exists with `prerender = true`
    - `bun run dev` -- visiting `/sitemap.xml` returns valid XML with 3 URLs
    - `bun run dev` -- visiting `/robots.txt` returns text with Allow/Disallow rules and Sitemap reference
    - `bun run build` includes sitemap.xml and robots.txt in prerendered output
  </verify>
  <done>
    Sitemap.xml lists public pages (/, /signup, /login) with proper priority. Robots.txt allows public pages and blocks dashboard/onboarding/API from crawlers. Both endpoints are prerendered at build time.
  </done>
</task>

</tasks>

<verification>
1. `bun run dev` starts without errors
2. View source at `/`: complete meta tags in `<head>` (title, description, og:title, og:image, twitter:card, canonical)
3. View source at `/`: `<script type="application/ld+json">` contains SoftwareApplication schema with price
4. `/sitemap.xml` returns valid XML listing 3 public URLs
5. `/robots.txt` returns valid robots.txt with Sitemap directive
6. `bun run build` completes and prerendered output includes the landing page, sitemap, and robots.txt
</verification>

<success_criteria>
- Landing page has complete Open Graph meta tags (title, description, image, type, url, siteName)
- Landing page has Twitter Card meta tags (summary_large_image)
- Landing page has canonical URL
- JSON-LD structured data present with SoftwareApplication schema and $20 price
- Sitemap.xml accessible and lists public pages
- Robots.txt accessible with correct Allow/Disallow rules
- All SEO endpoints prerender at build time
</success_criteria>

<output>
After completion, create `.planning/phases/04-landing-page/04-03-SUMMARY.md`
</output>
